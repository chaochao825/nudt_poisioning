基于您提供的UI设计和项目技术指标，我将设计模型训练、发布模型、执行防御这三个核心步骤对应的后端API接口说明。这些接口专注于人工智能模型投毒防御算法（NC、STRIP、差分隐私等）的训练和应用。

```markdown
# 数据投毒防御训练 API

## 1. 模型训练 API

### 1.1 启动数据投毒防御训练
```http
POST 127.0.0.1:19001/api-ai-server/ai-defense-training/poison-defense-training/start
```

**功能描述：** 启动数据投毒防御训练任务，训练具有投毒防御能力的模型

**INPUT:**
```json
{
  "callback_params": {
    "task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401",
    "method_type": "投毒防御训练",
    "algorithm_type": "训练阶段防御",
    "task_type": "数据投毒防御训练任务",
    "task_name": "启动NC+STRIP联合防御训练",
    "user_name": "zhangxueyou"
  },
  "business_params": {
    "user_name": "zhangxueyou",
    "scene_instance_id": "g65e83b89d375g0ac047a653399892fd",
    "training_session_id": "poison_defense_session_890123456",
    "model_info": {
      "model_id": "resnet50_v1",
      "model_name": "ResNet-50",
      "model_type": "decision",
      "model_path": "/models/resnet50_v1/pretrained.pth",
      "defense_architecture": "integrated"  // standalone, integrated, modular
    },
    "dataset_info": {
      "dataset_id": "cifar10_v1",
      "dataset_name": "CIFAR-10",
      "data_type": "image",
      "dataset_path": "/datasets/cifar10_v1",
      "poison_config": {
        "poison_type": "backdoor",  // backdoor, trojan, feature_collision
        "poison_method": "BadNets",
        "poison_rate": 0.1,
        "trigger_pattern": "square",
        "target_label": 0
      },
      "split_config": {
        "train_count": 40000,
        "validation_count": 10000,
        "test_count": 10000,
        "clean_train_ratio": 0.9,
        "poison_train_ratio": 0.1,
        "split_method": "stratified"
      }
    },
    "defense_methods": [
      {
        "method_id": "neural_cleanse_v1",
        "method_name": "NC (Neural Cleanse)",
        "defense_type": "anomaly_detection",
        "description": "神经网络清洗，检测和移除模型中的后门",
        "defense_stage": "post_training",
        "parameters": {
          "sensitivity": 0.7,
          "max_iterations": 500,
          "anomaly_threshold": 0.05,
          "trigger_removal": true,
          "model_finetuning": true
        }
      },
      {
        "method_id": "strip_v1",
        "method_name": "STRIP",
        "defense_type": "anomaly_detection",
        "description": "强扰动测试，通过输入扰动检测后门",
        "defense_stage": "inference",
        "parameters": {
          "perturbation_strength": 0.1,
          "test_samples": 50,
          "entropy_threshold": 0.5,
          "detection_threshold": 0.8
        }
      }
    ],
    "training_config": {
      "method_type": "投毒防御训练",
      "algorithm_type": "训练阶段防御",
      "max_training_time": 7200,
      "early_stopping": true,
      "early_stopping_patience": 10,
      "checkpoint_strategy": {
        "save_frequency": 5,
        "save_best_only": true,
        "max_checkpoints": 10,
        "save_defense_models": true
      },
      "defense_integration": {
        "integration_mode": "sequential",  // sequential, parallel, hybrid
        "defense_order": ["neural_cleanse_v1", "strip_v1"],
        "joint_optimization": true
      },
      "user_params": {
        "learning_rate": 0.001,
        "batch_size": 32,
        "epochs": 50,
        "optimizer": "adam",
        "loss_function": "cross_entropy",
        "defense_loss_weight": 0.3,
        "metrics": [
          "clean_accuracy", 
          "poison_accuracy", 
          "backdoor_success_rate",
          "defense_detection_rate",
          "false_positive_rate"
        ],
        "scheduler": {
          "type": "step_lr",
          "step_size": 20,
          "gamma": 0.1
        }
      }
    },
    "resource_config": {
      "compute_resource": "gpu-single",
      "gpu_ids": "0",
      "memory_limit": "8G",
      "parallel_workers": 4,
      "training_mode": "standard"
    }
  }
}
```

## 1.1 启动数据投毒防御训练 API 参数说明

### 回调参数 (`callback_params`)
- **`task_run_id`**: 任务运行唯一标识符，用于跟踪数据投毒防御训练任务的状态和执行过程
- **`method_type`**: 方法类型，标识为"投毒防御训练"操作类别
- **`algorithm_type`**: 算法类型，指定为"训练阶段防御"算法
- **`task_type`**: 任务类型，定义为"数据投毒防御训练任务"具体操作
- **`task_name`**: 任务名称，描述具体的投毒防御训练任务内容
- **`user_name`**: 执行训练任务的用户名称

### 业务参数 (`business_params`)
#### 基础信息
- **`user_name`**: 执行训练的用户名称
- **`scene_instance_id`**: 场景实例ID，标识训练运行的特定环境实例
- **`training_session_id`**: 训练会话ID，唯一标识本次投毒防御训练会话

#### 模型信息 (`model_info`)
- **`model_id`**: 模型唯一标识符，指定要训练的基础模型
- **`model_name`**: 模型名称，描述模型的具体标识
- **`model_type`**: 模型类型，指定为决策式模型
- **`model_path`**: 模型路径，指定预训练模型的文件位置
- **`defense_architecture`**: 防御架构，指定防御模块的集成方式
  - `standalone`: 独立防御模块
  - `integrated`: 集成到模型内部
  - `modular`: 模块化防御组件

#### 数据集信息 (`dataset_info`)
- **`dataset_id`**: 数据集唯一标识符
- **`dataset_name`**: 数据集名称
- **`data_type`**: 数据类型，指定数据集的数据格式
- **`dataset_path`**: 数据集路径，指定数据集的存储位置
- **`poison_config`**: 投毒配置
  - **`poison_type`**: 投毒类型，如后门、特洛伊木马、特征碰撞等
  - **`poison_method`**: 投毒方法，如BadNets、Trojan等
  - **`poison_rate`**: 投毒比例，被投毒样本的比例
  - **`trigger_pattern`**: 触发器模式，后门触发的模式
  - **`target_label`**: 目标标签，后门攻击的目标类别
- **`split_config`**: 数据切分配置
  - **`train_count`**: 训练集样本数量
  - **`validation_count`**: 验证集样本数量
  - **`test_count`**: 测试集样本数量
  - **`clean_train_ratio`**: 干净训练样本比例
  - **`poison_train_ratio`**: 投毒训练样本比例
  - **`split_method`**: 切分方法

#### 防御方法 (`defense_methods`)
- **`method_id`**: 防御方法唯一标识符
- **`method_name`**: 防御方法名称
- **`defense_type`**: 防御类型，如异常检测、数据验证等
- **`description`**: 防御方法描述
- **`defense_stage`**: 防御阶段，指定防御应用的阶段
  - `pre_training`: 训练前防御
  - `during_training`: 训练中防御
  - `post_training`: 训练后防御
  - `inference`: 推理时防御
- **`parameters`**: 防御方法参数配置
  - **`sensitivity`**: 检测敏感度
  - **`max_iterations`**: 最大迭代次数
  - **`anomaly_threshold`**: 异常阈值
  - **`trigger_removal`**: 是否移除触发器
  - **`model_finetuning`**: 是否微调模型

#### 训练配置 (`training_config`)
- **`method_type`**: 训练方法类型，指定为投毒防御训练
- **`algorithm_type`**: 算法类型，指定为训练阶段防御算法
- **`max_training_time`**: 最大训练时间（秒）
- **`early_stopping`**: 是否启用早停机制
- **`early_stopping_patience`**: 早停耐心值（轮次）
- **`checkpoint_strategy`**: 检查点保存策略
  - **`save_frequency`**: 保存频率，每多少轮保存一次
  - **`save_best_only`**: 是否只保存最佳模型
  - **`max_checkpoints`**: 最大检查点数量
  - **`save_defense_models`**: 是否保存防御模型
- **`defense_integration`**: 防御集成配置
  - **`integration_mode`**: 集成模式，指定防御方法的集成方式
  - **`defense_order`**: 防御顺序，防御方法的执行顺序
  - **`joint_optimization`**: 是否联合优化
- **`user_params`**: 用户定义的训练参数
  - **`learning_rate`**: 学习率
  - **`batch_size`**: 批处理大小
  - **`epochs`**: 训练总轮次
  - **`optimizer`**: 优化器类型
  - **`loss_function`**: 损失函数类型
  - **`defense_loss_weight`**: 防御损失权重
  - **`metrics`**: 评估指标列表
  - **`scheduler`**: 学习率调度器配置

#### 资源配置 (`resource_config`)
- **`compute_resource`**: 计算资源类型，如单GPU
- **`gpu_ids`**: GPU设备ID列表
- **`memory_limit`**: 内存限制
- **`parallel_workers`**: 并行工作进程数
- **`training_mode`**: 训练模式，指定训练的具体执行方式

**OUTPUT:**
```json
data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:00:123", "data": {"event": "poison_defense_training_start", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 5, "message": "开始数据投毒防御训练任务", "log": "[5%] 开始数据投毒防御训练任务 - 模型: ResNet-50, 数据集: CIFAR-10, 防御方法: NC+STRIP\n", "details": {"training_session_id": "poison_defense_session_890123456", "model_name": "ResNet-50", "dataset_name": "CIFAR-10", "defense_methods": ["NC (Neural Cleanse)", "STRIP"], "total_epochs": 50, "batch_size": 32}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:05:456", "data": {"event": "defense_environment_preparation", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 15, "message": "投毒防御环境准备完成", "log": "[15%] 投毒防御环境准备完成 - GPU资源分配成功，防御模块加载完成\n", "details": {"compute_resource": "gpu-single", "gpu_ids": "0", "defense_modules_loaded": ["NC", "STRIP"], "poison_config_loaded": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:10:789", "data": {"event": "poison_dataset_loading", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c3301", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 25, "message": "投毒数据集加载完成", "log": "[25%] CIFAR-10投毒数据集加载完成 - 干净样本: 36000, 投毒样本: 4000, 投毒比例: 10%\n", "details": {"dataset_name": "CIFAR-10", "clean_samples": 36000, "poison_samples": 4000, "poison_rate": 0.1, "poison_method": "BadNets", "target_label": 0}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:15:123", "data": {"event": "defense_model_initialization", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 35, "message": "防御模型初始化完成", "log": "[35%] ResNet-50防御模型初始化完成 - 防御架构: 集成模式, NC参数: 敏感度=0.7, STRIP参数: 熵阈值=0.5\n", "details": {"model_name": "ResNet-50", "defense_architecture": "integrated", "nc_parameters": {"sensitivity": 0.7, "max_iterations": 500}, "strip_parameters": {"entropy_threshold": 0.5, "test_samples": 50}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:20:456", "data": {"event": "epoch_start", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 40, "message": "开始第1轮投毒防御训练", "log": "[40%] 开始第1轮投毒防御训练 - 总批次: 1250, 防御损失权重: 0.3\n", "details": {"current_epoch": 1, "total_epochs": 50, "batches_per_epoch": 1250, "defense_loss_weight": 0.3, "joint_optimization": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:25:789", "data": {"event": "defense_training_progress", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 42, "message": "投毒防御训练中", "log": "[42%] 第1轮 - 批次100/1250: 分类损失=1.856, 防御损失=0.245, 总损失=1.521, 干净准确率=35.2%\n", "details": {"current_epoch": 1, "current_batch": 100, "classification_loss": 1.856, "defense_loss": 0.245, "total_loss": 1.521, "clean_accuracy": 0.352, "defense_detection_rate": 0.125}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:00:30:123", "data": {"event": "nc_trigger_detection", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 42, "message": "NC触发模式检测", "log": "[42%] NC触发模式检测 - 检测到可疑后门模式, 异常指数: 3.2, 阈值: 2.0\n", "details": {"nc_detection": "active", "anomaly_index": 3.2, "anomaly_threshold": 2.0, "suspected_backdoor": true, "trigger_pattern_detected": "square"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:01:15:456", "data": {"event": "epoch_completed", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 44, "message": "第1轮投毒防御训练完成", "log": "[44%] 第1轮投毒防御训练完成 - 干净准确率: 38.5%, 后门成功率: 85.2%, 防御检测率: 15.8%\n", "details": {"completed_epoch": 1, "clean_accuracy": 0.385, "backdoor_success_rate": 0.852, "defense_detection_rate": 0.158, "false_positive_rate": 0.032, "epoch_time": "48.5秒"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:25:30:789", "data": {"event": "mid_training_summary", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 65, "message": "投毒防御训练中期汇总", "log": "[65%] 投毒防御训练中期汇总 - 已完成30轮，干净准确率: 82.5%, 后门成功率: 25.3%, 防御检测率: 78.2%\n", "details": {"completed_epochs": 30, "total_epochs": 50, "clean_accuracy": 0.825, "backdoor_success_rate": 0.253, "defense_detection_rate": 0.782, "false_positive_rate": 0.041, "robustness_improvement": 0.529}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:50:00:123", "data": {"event": "training_completed", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 95, "message": "投毒防御训练完成", "log": "[95%] 投毒防御训练完成 - 总轮次: 50, 最终干净准确率: 91.8%, 后门成功率: 5.2%\n", "details": {"total_epochs": 50, "final_clean_accuracy": 0.918, "final_backdoor_success_rate": 0.052, "final_defense_detection_rate": 0.925, "final_false_positive_rate": 0.032, "total_training_time": "49分30秒"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:50:30:456", "data": {"event": "defense_model_evaluation", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 98, "message": "防御模型评估完成", "log": "[98%] 防御模型评估完成 - BadNets检测率: 92.5%, Trojan检测率: 88.3%, 误报率: 3.2%\n", "details": {"badnets_detection_rate": 0.925, "trojan_detection_rate": 0.883, "false_positive_rate": 0.032, "defense_coverage": 0.908, "model_robustness_verified": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-14:51:00:789", "data": {"event": "final_result", "callback_params": {"task_run_id": "poison_defense_training_7d2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御训练", "algorithm_type": "训练阶段防御", "task_type": "数据投毒防御训练任务", "task_name": "启动NC+STRIP联合防御训练", "user_name": "zhangxueyou"}, "progress": 100, "message": "数据投毒防御训练任务完成", "log": "[100%] 数据投毒防御训练任务完成\n", "details": {"training_session_id": "poison_defense_session_890123456", "model_name": "ResNet-50", "dataset_name": "CIFAR-10", "defense_methods": ["NC (Neural Cleanse)", "STRIP"], "final_results": {"clean_accuracy": 0.918, "backdoor_success_rate": 0.052, "defense_detection_rate": 0.925, "false_positive_rate": 0.032, "robustness_score": 0.886, "total_training_time": "50分钟"}, "defense_metrics": {"badnets_detection_rate": 0.925, "trojan_detection_rate": 0.883, "feature_collision_detection": 0.856, "triggerless_detection": 0.792}, "artifacts_saved": {"defense_model_checkpoint": "/defense_models/resnet50_nc_strip_cifar10_final.pth", "defense_config": "/defense_configs/resnet50_nc_strip_config.json", "training_logs": "/logs/poison_defense_session_890123456.log", "evaluation_report": "/reports/poison_defense_session_890123456.pdf"}}}}
```

## 2. 模型发布 API

### 2.1 发布投毒防御模型
```http
POST 127.0.0.1:19001/api-ai-server/ai-defense-training/poison-defense-model/publish
```

**功能描述：** 将训练完成的投毒防御模型发布到模型库，供后续防御应用使用

**INPUT:**
```json
{
  "callback_params": {
    "task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401",
    "method_type": "投毒防御模型发布",
    "algorithm_type": "防御模型发布",
    "task_type": "投毒防御模型发布任务",
    "task_name": "发布NC+STRIP防御模型",
    "user_name": "zhangxueyou"
  },
  "business_params": {
    "user_name": "zhangxueyou",
    "scene_instance_id": "g65e83b89d375g0ac047a653399892fd",
    "training_session_id": "poison_defense_session_890123456",
    "model_info": {
      "model_name": "ResNet-50-NC-STRIP-Defense",
      "model_id": "ResNet-model_id",
      "model_version": "v1.0",
      "model_description": "经过NC+STRIP联合训练的投毒防御ResNet-50模型",
      "base_model_id": "resnet50_v1",
      "defense_methods": ["NC (Neural Cleanse)", "STRIP"],
      "training_dataset": "CIFAR-10",
      "defense_coverage": ["BadNets", "Trojan", "Feature Collision"]
    },
    "model_metrics": {
      "clean_accuracy": 0.918,
      "backdoor_success_rate": 0.052,
      "defense_detection_rate": 0.925,
      "false_positive_rate": 0.032,
      "robustness_score": 0.886,
      "inference_time_ms": 17,
      "model_size_mb": 105.2,
      "defense_effectiveness": {
        "BadNets": 0.925,
        "Trojan": 0.883,
        "Feature_Collision": 0.856,
        "Triggerless": 0.792,
        "Dynamic_Backdoor": 0.815
      }
    },
    "publish_config": {
      "publish_type": "poison_defense_model",
      "access_level": "team",  // private, team, school, public
      "publish_location": "personal",  // personal, class, school
      "application_scenarios": ["face_recognition", "content_audit", "vehicle_recognition"],
      "tags": ["数据投毒防御", "NC", "STRIP", "ResNet", "CIFAR-10", "白盒防御", "黑盒防御"],
      "model_files": {
        "model_checkpoint": "/defense_models/resnet50_nc_strip_cifar10_final.pth",
        "model_config": "/defense_configs/resnet50_nc_strip_config.json",
        "defense_module": "/defense_modules/nc_strip_module.pth",
        "evaluation_report": "/reports/poison_defense_session_890123456.pdf",
        "training_logs": "/logs/poison_defense_session_890123456.log"
      },
      "validation_config": {
        "validate_defense": true,
        "test_attacks": ["BadNets", "Trojan", "Feature_Collision"],
        "validation_dataset": "CIFAR-10-test",
        "min_defense_rate": 0.85,
        "max_false_positive": 0.05
      }
    }
  }
}
```

## 2.1 发布投毒防御模型 API 参数说明

### 回调参数 (`callback_params`)
- **`task_run_id`**: 任务运行唯一标识符，用于跟踪投毒防御模型发布操作的状态和执行过程
- **`method_type`**: 方法类型，标识为"投毒防御模型发布"操作类别
- **`algorithm_type`**: 算法类型，指定为"防御模型发布"算法
- **`task_type`**: 任务类型，定义为"投毒防御模型发布任务"具体操作
- **`task_name`**: 任务名称，描述具体的投毒防御模型发布任务内容
- **`user_name`**: 执行发布操作的用户名称

### 业务参数 (`business_params`)
#### 基础信息
- **`user_name`**: 执行发布的用户名称
- **`scene_instance_id`**: 场景实例ID，标识模型发布的特定环境实例
- **`training_session_id`**: 训练会话ID，唯一标识发布模型对应的训练会话

#### 模型信息 (`model_info`)
- **`model_name`**: 模型名称，自定义的投毒防御模型名称
- **`model_version`**: 模型版本，指定模型的版本号
- **`model_description`**: 模型描述，详细描述模型的特点和用途
- **`base_model_id`**: 基础模型ID，原始模型的标识符
- **`defense_methods`**: 防御方法列表，使用的防御算法
- **`training_dataset`**: 训练数据集，模型训练所使用的数据集
- **`defense_coverage`**: 防御覆盖范围，模型能够防御的投毒攻击类型

#### 模型指标 (`model_metrics`)
- **`clean_accuracy`**: 干净准确率，模型在干净样本上的分类准确率
- **`backdoor_success_rate`**: 后门成功率，后门攻击对模型的成功率
- **`defense_detection_rate`**: 防御检测率，防御方法检测投毒样本的准确率
- **`false_positive_rate`**: 误报率，将干净样本误判为投毒样本的比例
- **`robustness_score`**: 鲁棒性评分，综合评估模型的防御能力
- **`inference_time_ms`**: 推理时间（毫秒），单张图片的推理时间
- **`model_size_mb`**: 模型大小（MB），模型文件的大小
- **`defense_effectiveness`**: 防御有效性，对不同投毒攻击的防御成功率
  - **`BadNets`**: 对BadNets攻击的防御率
  - **`Trojan`**: 对Trojan攻击的防御率
  - **`Feature_Collision`**: 对特征碰撞攻击的防御率
  - **`Triggerless`**: 对无触发器攻击的防御率
  - **`Dynamic_Backdoor`**: 对动态后门攻击的防御率

#### 发布配置 (`publish_config`)
- **`publish_type`**: 发布类型，指定为投毒防御模型
- **`access_level`**: 访问权限，定义模型的访问级别
  - `private`: 私有权限
  - `team`: 团队权限
  - `school`: 学校权限
  - `public`: 公开权限
- **`publish_location`**: 发布位置，指定模型发布的资源中心
  - `personal`: 个人资源中心
  - `class`: 班级共享资源
  - `school`: 全校资源库
- **`application_scenarios`**: 应用场景，模型适用的应用场景列表
- **`tags`**: 标签列表，用于模型分类和检索的关键词
- **`model_files`**: 模型文件，指定需要发布的模型相关文件
  - **`model_checkpoint`**: 模型检查点文件路径
  - **`model_config`**: 模型配置文件路径
  - **`defense_module`**: 防御模块文件路径
  - **`evaluation_report`**: 评估报告文件路径
  - **`training_logs`**: 训练日志文件路径
- **`validation_config`**: 验证配置，发布前的验证设置
  - **`validate_defense`**: 是否验证防御能力，true表示发布前进行防御验证
  - **`test_attacks`**: 测试攻击，验证时使用的攻击方法列表
  - **`validation_dataset`**: 验证数据集，用于验证的数据集
  - **`min_defense_rate`**: 最小防御率，模型必须达到的防御要求
  - **`max_false_positive`**: 最大误报率，模型必须满足的误报限制

**OUTPUT:**
```json
data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:00:123", "data": {"event": "poison_defense_model_publish_start", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 10, "message": "开始发布投毒防御模型", "log": "[10%] 开始发布投毒防御模型: ResNet-50-NC-STRIP-Defense v1.0\n", "details": {"model_name": "ResNet-50-NC-STRIP-Defense", "model_version": "v1.0", "defense_methods": ["NC (Neural Cleanse)", "STRIP"], "base_model": "ResNet-50"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:05:456", "data": {"event": "defense_model_validation", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 30, "message": "投毒防御模型验证中", "log": "[30%] 投毒防御模型验证中 - 检查防御模块完整性和有效性\n", "details": {"validation_status": "in_progress", "model_checkpoint_valid": true, "defense_module_detected": true, "defense_config_valid": true, "integrity_check_passed": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:10:789", "data": {"event": "defense_effectiveness_testing", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 50, "message": "防御有效性测试中", "log": "[50%] 防御有效性测试中 - BadNets防御率: 92.5%, Trojan防御率: 88.3%, 误报率: 3.2%\n", "details": {"defense_testing": "in_progress", "badnets_defense_rate": 0.925, "trojan_defense_rate": 0.883, "feature_collision_defense": 0.856, "false_positive_rate": 0.032, "meets_requirements": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:15:123", "data": {"event": "model_registration", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 70, "message": "防御模型注册到模型库", "log": "[70%] 防御模型注册到模型库 - 生成模型ID: defense_resnet50_nc_strip_v1\n", "details": {"model_registration": "in_progress", "model_id_generated": "defense_resnet50_nc_strip_v1", "metadata_creation": "complete", "access_level": "team", "publish_location": "personal"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:20:456", "data": {"event": "artifact_upload", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 85, "message": "防御模型文件上传中", "log": "[85%] 防御模型文件上传中 - 检查点: 105.2MB, 防御模块: 12.3MB, 配置: 8.5KB\n", "details": {"artifact_upload": "in_progress", "checkpoint_uploaded": "80%", "defense_module_uploaded": "90%", "config_uploaded": "100%", "report_uploaded": "70%", "logs_uploaded": "60%"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:00:25:789", "data": {"event": "publish_completed", "callback_params": {"task_run_id": "poison_defense_model_publish_8a2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御模型发布", "algorithm_type": "防御模型发布", "task_type": "投毒防御模型发布任务", "task_name": "发布NC+STRIP防御模型", "user_name": "zhangxueyou"}, "progress": 100, "message": "投毒防御模型发布完成", "log": "[100%] 投毒防御模型发布完成 - 模型ID: defense_resnet50_nc_strip_v1\n", "details": {"publish_completed": true, "model_id": "defense_resnet50_nc_strip_v1", "model_url": "/defense_models/defense_resnet50_nc_strip_v1", "access_url": "https://model-library/defense_resnet50_nc_strip_v1", "published_time": "2024-01-20T15:00:25Z", "published_by": "zhangxueyou", "tags": ["数据投毒防御", "NC", "STRIP", "ResNet", "CIFAR-10"], "application_scenarios": ["face_recognition", "content_audit", "vehicle_recognition"]}}}
```

## 3. 执行防御 API

### 3.1 启动投毒防御应用
```http
POST 127.0.0.1:19001/api-ai-server/ai-defense-training/poison-defense/apply
```

**功能描述：** 应用投毒防御方法到目标模型，评估防御效果

**INPUT:**
```json
{
  "callback_params": {
    "task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401",
    "method_type": "投毒防御应用",
    "algorithm_type": "防御效果评估",
    "task_type": "投毒防御应用任务",
    "task_name": "启动NC+STRIP防御应用",
    "user_name": "zhangxueyou"
  },
  "business_params": {
    "user_name": "zhangxueyou",
    "scene_instance_id": "g65e83b89d375g0ac047a653399892fd",
    "defense_session_id": "poison_defense_apply_session_567890123",
    "model_info": {
      "model_id": "defense_resnet50_nc_strip_v1",
      "model_name": "ResNet-50-NC-STRIP-Defense"
    },
    "dataset_info": {
      "dataset_id": "cifar10_poison_test",
      "dataset_name": "CIFAR-10投毒测试集"
    },
    "defense_config": {
      "defense_mode": "data_filtering",  // data_filtering, model_retraining, backdoor_removal
      "defense_strength": 5,
      "active_defenses": ["NC", "STRIP"],
      "defense_parameters": {
        "nc_sensitivity": 0.7,
        "strip_entropy_threshold": 0.5,
        "filter_threshold": 0.8,
        "retraining_epochs": 10,
        "defense_intensity": "medium"  // low, medium, high
      },
      "evaluation_metrics": [
        "clean_accuracy",
        "poison_detection_rate", 
        "false_positive_rate",
        "backdoor_success_rate",
        "defense_coverage",
        "inference_overhead"
      ],
      "test_parameters": {
        "batch_size": 32,
        "num_test_samples": 10000,
        "save_detected_samples": true,
        "generate_visualization": true,
        "generate_comparison": true
      }
    },
    "comparison_config": {
      "compare_with_original": true,
      "original_model_id": "resnet50_v1",
      "compare_with_poisoned": true,
      "poisoned_model_id": "resnet50_badnets_v1",
      "comparison_metrics": [
        "accuracy_delta",
        "backdoor_reduction", 
        "robustness_improvement",
        "overhead_increase"
      ],
      "generate_comparison_report": true
    },
    "resource_config": {
      "compute_resource": "gpu-single",
      "gpu_ids": "0",
      "memory_limit": "8G",
      "parallel_workers": 4,
      "defense_priority": "balanced"  // speed, accuracy, robustness
    }
  }
}
```

## 3.1 启动投毒防御应用 API 参数说明

### 回调参数 (`callback_params`)
- **`task_run_id`**: 任务运行唯一标识符，用于跟踪投毒防御应用操作的状态和执行过程
- **`method_type`**: 方法类型，标识为"投毒防御应用"操作类别
- **`algorithm_type`**: 算法类型，指定为"防御效果评估"算法
- **`task_type`**: 任务类型，定义为"投毒防御应用任务"具体操作
- **`task_name`**: 任务名称，描述具体的投毒防御应用任务内容
- **`user_name`**: 执行防御应用的用户名称

### 业务参数 (`business_params`)
#### 基础信息
- **`user_name`**: 执行防御应用的用户名称
- **`scene_instance_id`**: 场景实例ID，标识防御应用的特定环境实例
- **`defense_session_id`**: 防御会话ID，唯一标识本次投毒防御应用会话

#### 模型信息 (`model_info`)
- **`model_id`**: 防御模型唯一标识符
- **`model_name`**: 防御模型名称
- **`model_type`**: 模型类型，指定为投毒防御模型
- **`model_path`**: 模型路径，指定防御模型的文件位置
- **`defense_config_path`**: 防御配置路径，指定防御配置的文件位置

#### 数据集信息 (`dataset_info`)
- **`dataset_id`**: 数据集唯一标识符
- **`dataset_name`**: 数据集名称
- **`data_type`**: 数据类型，指定数据集的数据格式
- **`dataset_path`**: 数据集路径，指定测试数据集的存储位置
- **`test_type`**: 测试类型，指定测试数据的类型
  - `clean`: 干净样本测试
  - `poison`: 投毒样本测试
  - `mixed`: 混合样本测试
- **`poison_config`**: 投毒配置（当test_type为poison或mixed时）
  - **`poison_types`**: 投毒类型列表
  - **`poison_rates`**: 投毒比例列表
  - **`generate_on_fly`**: 是否动态生成投毒样本

#### 防御配置 (`defense_config`)
- **`defense_mode`**: 防御模式，指定防御应用的具体方式
  - `data_filtering`: 数据过滤模式
  - `model_retraining`: 模型重新训练模式
  - `backdoor_removal`: 后门移除模式
- **`defense_strength`**: 防御强度，防御的严格程度（1-10）
- **`active_defenses`**: 激活防御，使用的具体防御方法
- **`defense_parameters`**: 防御参数
  - **`nc_sensitivity`**: NC检测敏感度
  - **`strip_entropy_threshold`**: STRIP熵阈值
  - **`filter_threshold`**: 过滤阈值
  - **`retraining_epochs`**: 重新训练轮数
  - **`defense_intensity`**: 防御强度级别
- **`evaluation_metrics`**: 评估指标，防御效果的评估维度
- **`test_parameters`**: 测试参数
  - **`batch_size`**: 批处理大小
  - **`num_test_samples`**: 测试样本数量
  - **`save_detected_samples`**: 是否保存检测到的样本
  - **`generate_visualization`**: 是否生成可视化结果
  - **`generate_comparison`**: 是否生成对比结果

#### 对比配置 (`comparison_config`)
- **`compare_with_original`**: 是否与原始模型对比
- **`original_model_id`**: 原始模型ID，对比的干净模型标识符
- **`compare_with_poisoned`**: 是否与投毒模型对比
- **`poisoned_model_id`**: 投毒模型ID，对比的投毒模型标识符
- **`comparison_metrics`**: 对比指标，需要对比的性能指标列表
- **`generate_comparison_report`**: 是否生成对比报告

#### 资源配置 (`resource_config`)
- **`compute_resource`**: 计算资源类型
- **`gpu_ids`**: GPU设备ID列表
- **`memory_limit`**: 内存限制
- **`parallel_workers`**: 并行工作进程数
- **`defense_priority`**: 防御优先级，指定防御的优化目标

**OUTPUT:**
```json
data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:00:123", "data": {"event": "poison_defense_apply_start", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 10, "message": "开始投毒防御应用", "log": "[10%] 开始投毒防御应用 - 模型: ResNet-50-NC-STRIP-Defense, 防御模式: 数据过滤, 强度: 5\n", "details": {"defense_session_id": "poison_defense_apply_session_567890123", "model_name": "ResNet-50-NC-STRIP-Defense", "defense_mode": "data_filtering", "defense_strength": 5, "active_defenses": ["NC", "STRIP"]}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:05:456", "data": {"event": "defense_environment_setup", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 25, "message": "防御应用环境设置完成", "log": "[25%] 防御应用环境设置完成 - 防御模块初始化: NC敏感度=0.7, STRIP熵阈值=0.5\n", "details": {"compute_resource": "gpu-single", "gpu_ids": "0", "nc_initialized": true, "strip_initialized": true, "defense_environment_ready": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:10:789", "data": {"event": "defense_model_loading", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 40, "message": "防御模型加载完成", "log": "[40%] 防御模型加载完成 - 模型大小: 105.2MB, NC防御模块激活, STRIP防御模块激活\n", "details": {"model_loaded": true, "model_size": "105.2MB", "nc_module_active": true, "strip_module_active": true, "defense_intensity": "medium", "inference_engine_ready": true}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:15:123", "data": {"event": "clean_sample_testing", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 45, "message": "干净样本测试进行中", "log": "[45%] 干净样本测试进行中 - 已处理: 2500/5000样本, 准确率: 91.8%, 误报率: 3.1%\n", "details": {"test_phase": "clean_samples", "samples_processed": 2500, "total_samples": 5000, "current_accuracy": 0.918, "false_positive_rate": 0.031, "inference_time": 17.5}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:25:456", "data": {"event": "clean_test_completed", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 50, "message": "干净样本测试完成", "log": "[50%] 干净样本测试完成 - 准确率: 91.7%, 误报率: 3.2%, 推理时间: 17.8ms\n", "details": {"test_phase_completed": "clean_samples", "final_accuracy": 0.917, "false_positive_rate": 0.032, "inference_time_avg": 17.8, "total_samples_tested": 5000, "test_duration": "10.3秒"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:30:789", "data": {"event": "badnets_defense_testing", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 55, "message": "BadNets防御测试进行中", "log": "[55%] BadNets防御测试进行中 - 已处理: 1200/2500样本, 检测率: 91.8%, 后门成功率: 6.5%\n", "details": {"attack_type": "BadNets", "samples_processed": 1200, "total_samples": 2500, "current_detection_rate": 0.918, "current_backdoor_success": 0.065, "defense_confidence": 0.892}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:45:123", "data": {"event": "badnets_test_completed", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 65, "message": "BadNets防御测试完成", "log": "[65%] BadNets防御测试完成 - 检测率: 92.5%, 后门成功率: 5.2%, 误报率: 3.2%\n", "details": {"attack_type_completed": "BadNets", "detection_rate": 0.925, "backdoor_success_rate": 0.052, "false_positive_rate": 0.032, "defense_coverage": 0.925, "samples_tested": 2500, "test_duration": "14.3秒"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:10:50:456", "data": {"event": "trojan_defense_testing", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 70, "message": "Trojan防御测试进行中", "log": "[70%] Trojan防御测试进行中 - 已处理: 900/2000样本, 检测率: 87.2%, 后门成功率: 10.8%\n", "details": {"attack_type": "Trojan", "samples_processed": 900, "total_samples": 2000, "current_detection_rate": 0.872, "current_backdoor_success": 0.108, "defense_confidence": 0.835}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:11:10:789", "data": {"event": "trojan_test_completed", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 80, "message": "Trojan防御测试完成", "log": "[80%] Trojan防御测试完成 - 检测率: 88.3%, 后门成功率: 9.5%, 误报率: 3.5%\n", "details": {"attack_type_completed": "Trojan", "detection_rate": 0.883, "backdoor_success_rate": 0.095, "false_positive_rate": 0.035, "defense_coverage": 0.883, "samples_tested": 2000, "test_duration": "19.8秒"}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:11:30:123", "data": {"event": "defense_comparison_analysis", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 90, "message": "防御效果对比分析中", "log": "[90%] 防御效果对比分析中 - 与投毒模型对比，后门成功率降低: 82.4%\n", "details": {"comparison_analysis": "in_progress", "backdoor_success_reduction": 0.824, "robustness_improvement": 0.834, "accuracy_change": -0.007, "inference_overhead_increase": 0.15}}}

data: {"resp_code": 0, "resp_msg": "操作成功", "time_stamp": "2024/07/01-15:12:00:456", "data": {"event": "poison_defense_completed", "callback_params": {"task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401", "method_type": "投毒防御应用", "algorithm_type": "防御效果评估", "task_type": "投毒防御应用任务", "task_name": "启动NC+STRIP防御应用", "user_name": "zhangxueyou"}, "progress": 100, "message": "投毒防御应用完成", "log": "[100%] 投毒防御应用完成\n", "details": {"defense_session_id": "poison_defense_apply_session_567890123", "model_name": "ResNet-50-NC-STRIP-Defense", "final_results": {"clean_accuracy": 0.917, "robustness_score": 0.886, "backdoor_success_rate": 0.052, "defense_detection_rate": 0.908, "false_positive_rate": 0.032, "inference_time": 17.8}, "defense_effectiveness": {"badnets_detection_rate": 0.925, "trojan_detection_rate": 0.883, "feature_collision_detection": 0.856, "overall_defense_coverage": 0.888}, "comparison_results": {"backdoor_success_reduction": 0.824, "robustness_improvement": 0.834, "accuracy_change": -0.007, "inference_overhead_increase": 0.15}, "performance_metrics": {"nc_anomaly_index": 1.2, "strip_entropy_score": 0.42, "defense_confidence": 0.892, "robustness_ranking": "high"}, "artifacts_saved": {"defense_report": "/reports/poison_defense_apply_session_567890123.pdf", "detected_samples": "/data/poison_defense_apply_session_567890123/detected", "visualizations": "/visualizations/poison_defense_apply_session_567890123", "comparison_charts": "/charts/poison_defense_apply_session_567890123"}}}}
```

### 4.2 停止投毒防御应用
```http
POST 127.0.0.1:19001/api-ai-server/ai-defense-training/poison-defense/stop
```
{
  "resp_code": 0,
  "resp_msg": "投毒防御应用任务已成功停止",
  "time_stamp": "2024/07/01-15:15:00:456",
  "data": {
    "callback_params": {
      "task_run_id": "poison_defense_apply_9c2504e0-5f89-11d3-9a0c-0405e82c4401",
      "status": "stopped",
      "progress": 85,
      "message": "投毒防御应用任务已成功停止"
    },
    "request_params": {
      "scene_instance_id": "g65e83b89d375g0ac047a653399892fd",
      "defense_session_id": "poison_defense_apply_session_567890123",
      "stop_config": {
        "method_type": "投毒防御应用停止",
        "algorithm_type": "防御资源清理",
        "save_final_results": true,
        "generate_summary_report": true,
        "cleanup_resources": true,
        "force_stop": false,
        "stop_timeout": 60,
        "result_preservation": {
          "save_test_logs": true,
          "save_metrics_data": true,
          "save_visualizations": true,
          "save_detected_samples": true
        }
      },
      "cleanup_config": {
        "release_model_memory": true,
        "clean_temp_files": true,
        "close_defense_modules": true,
        "terminate_defense_processes": true,
        "archive_defense_results": true
      }
    },
    "response_data": {
      "stop_result": {
        "stop_status": "stopped",
        "stop_timestamp": "2024-01-20T15:15:00Z",
        "final_results_saved": true,
        "summary_report_path": "/reports/poison_defense_apply_session_567890123_summary.pdf",
        "defense_summary": {
          "total_samples_tested": 7500,
          "clean_accuracy": 0.917,
          "backdoor_success_rate": 0.052,
          "defense_detection_rate": 0.908,
          "false_positive_rate": 0.032,
          "defense_effectiveness": {
            "BadNets": 0.925,
            "Trojan": 0.883,
            "Feature_Collision": 0.856
          },
          "test_duration": "2分钟",
          "stop_reason": "user_requested",
          "completion_percentage": 85
        },
        "saved_artifacts": {
          "defense_report": "/reports/poison_defense_apply_session_567890123.pdf",
          "metrics_data": "/data/poison_defense_apply_session_567890123/metrics.json",
          "defense_visualizations": "/visualizations/poison_defense_apply_session_567890123",
          "detected_samples": "/data/poison_defense_apply_session_567890123/detected",
          "comparison_charts": "/charts/poison_defense_apply_session_567890123"
        },
        "resource_cleanup": {
          "model_memory_released": "105.2MB",
          "system_memory_released": "256MB",
          "temp_files_cleaned": true,
          "defense_processes_terminated": true,
          "defense_modules_closed": true,
          "gpu_memory_freed": true
        },
        "recovery_info": {
          "can_resume": false,
          "defense_completed": false,
          "defense_progress": "85%",
          "result_availability": "partial",
          "resume_supported": true,
          "resume_checkpoint": "/checkpoints/poison_defense_apply_session_567890123/resume.pkl"
        }
      },
      "execution_metadata": {
        "timestamp": "2024-01-20T15:15:00Z",
        "execution_time": "3.2s",
        "resource_usage": {
          "memory": "86MB",
          "cpu_time": "2.1s"
        }
      }
    }
  }
}
